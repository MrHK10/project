{% extends 'base.html' %}

{% block title %}Company_list{% endblock title %}

{% block body %}
<!-- team section -->
<section class="team_section layout_padding">
    <div class="heading_container heading_center">
        <h2 class="">
            Compa<span>nies</span>
        </h2>
    </div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-9">
                <form method="GET" action="{% url 'Company_list' %}" class="form-inline my-2 my-lg-0">
                    <input class="form-control mr-sm-2" type="text" name="search_query" placeholder="Search by company" value="{{ search_query }}">
                    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
                </form>
            </div>
            <div class="col-lg-3">
                <button id="add-company-btn" class="btn btn-primary" data-toggle="modal" data-target="#add-company-modal">Add Company</button>
            </div>
        </div>
    </div>
    <div class="container-fluid">

        <div class="team_container">
            <div class="row">
                {% for job in jobs %}
                <div class="col-lg-3 col-sm-6">
                    <div class="box ">
                        <div class="detail-box">
                            <h5>
                                {{ job.company_name }}
                            </h5>
                            <p>
                                <p class="card-text"> <a href="{{ job.website }}">{{ job.website }}</a></p>
                            </p>
                            <p class="card-text"><strong>Employees:</strong> {{ job.employees }}</p>
                            {% comment %} <p class="card-text"><strong>Industry:</strong> {{ job.industry }}</p> {% endcomment %}
                            <p class="card-text"><strong>Headquarters: </strong><a href=''>{{ job.job_location }}</p></a>
                            <p><strong>More Locations: </strong><a href="{% url 'Alllocations' company_name=job.company_name %}">{{ job.locations }}</a></p>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Popup box for adding a company -->
            <div class="modal fade" id="add-company-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Add Company</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <form action="{% url 'Company_list' %}" method="post">
                                {% csrf_token %}
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Company Name" id="company_name" name="company_name" required>
                                </div>
                                <div class="form-group">
                                    <input type="url" class="form-control" placeholder="Website" id="website" name="website" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Location" id="job_location" name="job_location" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Employees" id="employees" name="employees" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Locations" id="locations" name="locations" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Type" id="job_type" name="job_type" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Founded" id="founded" name="founded" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Revenue" id="revenue" name="revenue" required>
                                </div>
                                <div class="form-group">
                                    <input type="text" class="form-control" placeholder="Industry" id="industry" name="industry" required>
                                </div>
                                <div class="form-group">
                                    <textarea class="form-control" rows="3" placeholder="All Location Info" id="all_location_info" name="all_location_info" required></textarea>
                                </div>
                                <!-- Add other fields here -->
                                <button type="submit" class="btn btn-primary">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Pagination -->
            <div class="row justify-content-center mt-3"> <!-- Center alignment and top margin -->
                <div class="pagination mx-auto"> <!-- Center the pagination -->
                    {% if jobs.has_previous %}
                    <a href="?page=1">&laquo; First</a>
                    <a href="?page={{ jobs.previous_page_number }}">Previous</a>
                    {% endif %}
                    <span class="current">Page {{ jobs.number }} of {{ jobs.paginator.num_pages }}.</span>
                    {% if jobs.has_next %}
                    <a href="?page={{ jobs.next_page_number }}">Next</a>
                    <a href="?page={{ jobs.paginator.num_pages }}">Last &raquo;</a>
                    {% endif %}
                </div>
            </div>
            <!-- End Pagination -->
        </div>
    </div>
</section>

<!-- end team section -->

{% endblock body %}
